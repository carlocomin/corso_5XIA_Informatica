<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ITST – 5ª · Lez3_7 · Funzioni di utilità sugli array</title>
  <link rel="stylesheet" href="../style.css" />
  <link rel="stylesheet" href="../default.css" />
  <script src="../highlight.js"></script>
  <script>
    try { hljs.highlightAll(); } catch (e) {}
    function prevSlide(){ window.location.href = "lez3_6.html"; }
    function nextSlide(){ window.location.href = "lez3_8.html"; }
    function toggleMenu(){ document.getElementById('menu').classList.toggle('open'); }
  </script>
</head>
<body>
  <!-- BEGIN MENU -->
  <button class="menu-toggle" onclick="toggleMenu()">&#9776; Menu</button>
  <div class="sidebar" id="menu">
    <h2>Lezione 3 — PHP + MySQL + HTML/CSS</h2>
    <ul>
      <li><a href="lez3_1.html">Lez3.1: Obiettivi e percorso</a></li>
      <li><a href="lez3_2.html">Lez3.2: Ripasso e flusso richiesta/risposta</a></li>
      <li><a href="lez3_3.html">Lez3.3: Setup ambiente</a></li>
      <li><a href="lez3_4.html">Lez3.4: Primo script PHP</a></li>
      <li><a href="lez3_5.html">Lez3.5: Sintassi base e tipi</a></li>
      <li><a href="lez3_6.html">Lez3.6: Datatype fondamentali e array</a></li>
      <li><a href="lez3_7.html">Lez3.7: Funzioni di utilità sugli array</a></li>
      <li><a href="piano.html#lez3-8">Lez3.8: Array associativi (mappe)</a></li>
      <li><a href="piano.html#lez3-9">Lez3.9: Operazioni sugli array</a></li>
      <li><a href="piano.html#lez3-10">Lez3.10: Connessione a MySQL</a></li>
      <li><a href="piano.html#lez3-11">Lez3.11: Query e prepared statements</a></li>
      <li><a href="piano.html#lez3-12">Lez3.12: Integrazione HTML/CSS e sicurezza</a></li>
    </ul>
  </div>
  <!-- END MENU -->

  <div class="slide">
    <h1>Funzioni di utilità sugli array</h1>

    <div class="nav-buttons" style="margin-bottom:10px">
      <button onclick="prevSlide()">&#8592; Indietro</button>
      <button onclick="nextSlide()">Avanti &#8594;</button>
    </div>

    <div class="content-box">
      <div class="inner-box">
        <p class="note">
          Una selezione delle funzioni più usate sugli array in PHP. Ogni blocco riporta
          cosa fa la funzione, l'esempio di codice e la spiegazione dell'output.
        </p>

        <div class="box">
          <h2>array_sum(array $valori): somma di tutti gli elementi</h2>
          <p>Converte automaticamente stringhe numeriche in numero e ignora valori non numerici.</p>
          <pre><code class="language-php">&lt;?php
$prezzi = [9.99, 14.50, 3];
$totale = array_sum($prezzi);

echo "Totale carrello: €" . number_format($totale, 2, ',', '.');
// Output: Totale carrello: €27,49
?&gt;</code></pre>
          <p class="note">Somma i tre valori e formatta il totale con due decimali e separatore italiano.</p>
        </div>

        <div class="box">
          <h2>array_map(callable $f, array $a): applica una funzione a tutti gli elementi</h2>
          <p>Utile per trasformazioni senza scrivere cicli espliciti.</p>
          <pre><code class="language-php">&lt;?php
$voti = [18, 23, 30];
$stati = array_map(function($voto) {
  return $voto &gt;= 18 ? "Promosso" : "Insufficiente";
}, $voti);

print_r($stati);
/* Output:
Array
(
    [0] =&gt; Promosso
    [1] =&gt; Promosso
    [2] =&gt; Promosso
)
*/
?&gt;</code></pre>
          <p class="note">La funzione anonima riceve ogni voto e restituisce una stringa; <code>array_map</code> crea il nuovo array.</p>
        </div>

        <div class="box">
          <h2>array_filter(array $a, ?callable $f = null): filtra gli elementi</h2>
          <p>Se la callback non è indicata, rimuove i valori “falsy” (0, stringa vuota, <code>null</code>, ecc.).</p>
          <pre><code class="language-php">&lt;?php
$numeri = [10, 5, 0, -2, 7];
$positivi = array_filter($numeri, function($n) {
  return $n &gt; 0;
});

print_r($positivi);
// Output: Array ( [0] =&gt; 10 [1] =&gt; 5 [4] =&gt; 7 )
?&gt;</code></pre>
          <p class="note">Manteniamo solo i valori maggiori di zero; le chiavi originali (0,1,4) vengono preservate.</p>
        </div>

        <div class="box">
          <h2>in_array(mixed $needle, array $haystack): cerca un valore</h2>
          <p>Con il terzo parametro <code>true</code> esegue il confronto stretto (tipo + valore).</p>
          <pre><code class="language-php">&lt;?php
$tagConsentiti = ["news", "eventi", "offerte"];
if (in_array("eventi", $tagConsentiti)) {
  echo "Tag valido, posso salvarlo.";
}

var_dump(in_array(1, ["1", 2]));        // true (confronto non stretto)
var_dump(in_array(1, ["1", 2], true));   // false (tipo diverso)
?&gt;</code></pre>
          <p class="note">Il confronto non stretto converte le stringhe numeriche; passando <code>true</code> evitiamo conversioni indesiderate.</p>
        </div>

        <div class="box">
          <h2>array_merge(array ...$arrays): unisce più array</h2>
          <p>Per le chiavi numeriche, reindicizza in sequenza; per le chiavi stringa, l'ultimo valore sovrascrive i precedenti.</p>
          <pre><code class="language-php">&lt;?php
$base = ["rosso", "verde"];
$extra = ["blu", "giallo"];
$uniti = array_merge($base, $extra);

print_r($uniti);
// Output: Array ( [0] =&gt; rosso [1] =&gt; verde [2] =&gt; blu [3] =&gt; giallo )

$a = ["tema" =&gt; "scuro", "font" =&gt; "Arial"];
$b = ["tema" =&gt; "chiaro", "grandezza" =&gt; 16];
$preferenze = array_merge($a, $b);
print_r($preferenze);
// Output: Array ( [tema] =&gt; chiaro [font] =&gt; Arial [grandezza] =&gt; 16 )
?&gt;</code></pre>
          <p class="note">Nel primo caso gli elementi vengono accodati; nel secondo le chiavi stringa permettono di sovrascrivere le impostazioni.</p>
        </div>

        <div class="box">
          <h2>array_key_exists(string|int $chiave, array $array): verifica la presenza di una chiave</h2>
          <p>Restituisce <code>true</code> anche se il valore associato è <code>null</code>, a differenza di <code>isset()</code>.</p>
          <pre><code class="language-php">&lt;?php
$utente = [
  "nome" =&gt; "Luca",
  "ruolo" =&gt; null,
];

var_dump(array_key_exists("ruolo", $utente)); // true
var_dump(isset($utente["ruolo"]));             // false
?&gt;</code></pre>
          <p class="note">Utile quando la chiave può esistere ma avere un valore nullo (es. campo opzionale non compilato).</p>
        </div>

        <div class="box">
          <h2>Combina le funzioni per pipeline compatte</h2>
          <p>Un esempio di analisi dati: normalizzare, filtrare e sommare in tre passaggi leggibili.</p>
          <pre><code class="language-php">&lt;?php
$acquisti = ["10", "5.5", "", "7", "errore"];

$numeri = array_map('floatval', $acquisti);          // converte in numeri
$validi  = array_filter($numeri, function($n) {
  return $n &gt; 0;                                     // scarta 0, NaN e vuoti
});
$totale = array_sum($validi);                        // somma solo i valori validi

echo "Spesa totale: €" . number_format($totale, 2, ',', '.');
// Output: Spesa totale: €22,50
?&gt;</code></pre>
          <p class="note">Componendo <code>array_map</code>, <code>array_filter</code> e <code>array_sum</code> creiamo una pipeline senza cicli manuali.</p>
        </div>
      </div>
    </div>

    <div class="nav-buttons" style="margin-top:10px">
      <button onclick="prevSlide()">&#8592; Indietro</button>
      <button onclick="nextSlide()">Avanti &#8594;</button>
    </div>
  </div>
</body>
</html>
