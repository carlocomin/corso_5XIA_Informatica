<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ITST – 5ª · Lez2_3 · Relazioni e cardinalità nel modello E-R</title>
  <link rel="stylesheet" href="../style.css" />
  <link rel="stylesheet" href="../default.css" />
  <script src="../highlight.js"></script>
  <script>
    try { hljs.highlightAll(); } catch (e) {}
    function prevSlide(){ window.location.href = "lez2_2.html"; }
    function nextSlide(){ window.location.href = "lez2_4.html"; }
    function toggleMenu(){ document.getElementById('menu').classList.toggle('open'); }
    function toggleBox(btnId, boxId){
      const box = document.getElementById(boxId);
      const btn = document.getElementById(btnId);
      const open = box.style.display === 'block';
      box.style.display = open ? 'none' : 'block';
      btn.textContent = open ? 'Mostra ▼' : 'Nascondi ▲';
    }
  </script>
</head>
<body>
  <!-- BEGIN MENU -->
  <button class="menu-toggle" onclick="toggleMenu()">&#9776; Menu</button>
  <div class="sidebar" id="menu">
    <h2>Lezione 2 — Diagramma E-R di Chen</h2>
    <ul>
      <li><a href="lez2_1.html">Lez2.1: Introduzione e motivazioni</a></li>
      <li><a href="lez2_2.html">Lez2.2: Concetti fondamentali</a></li>
      <li><a href="lez2_3.html">Lez2.3: Relazioni e cardinalità</a></li>
      <li><a href="lez2_4.html">Lez2.4: Entità deboli e identificazione</a></li>
      <li><a href="lez2_5.html">Lez2.5: Attributi derivati e composti</a></li>
      <li><a href="lez2_6.html">Lez2.6: Generalizzazione e specializzazione</a></li>
      <li><a href="lez2_7.html">Lez2.7: Traduzione E-R → Relazionale</a></li>
      <li><a href="lez2_8.html">Lez2.8: Esercitazione e micro-verifica</a></li>
    </ul>
  </div>
  <!-- END MENU -->

  <div class="slide">
    <h1>Relazioni e cardinalità nel modello E-R</h1>

    <div class="nav-buttons" style="margin-bottom:10px">
      <button onclick="prevSlide()">&#8592; Indietro</button>
      <button onclick="nextSlide()">Avanti &#8594;</button>
    </div>

    <div class="content-box">
      <div class="inner-box">

        <h2>Definizione formale di relazione (Chen, 1976)</h2>
        <div class="box">
          <p>
            Una <strong>relazione</strong> collega due o più insiemi di entità.  
            Se <code>E₁, E₂, …, Eₙ</code> sono insiemi di entità, una relazione <code>R</code> è definita come
            un <strong>sottoinsieme del prodotto cartesiano</strong>:
          </p>
          <p class="ok"><code>R ⊆ E₁ × E₂ × … × Eₙ</code></p>
          <p>
            Ogni elemento <code>(e₁, e₂, …, eₙ)</code> di <code>R</code> rappresenta una <strong>istanza di relazione</strong>,
            cioè un collegamento logico tra istanze delle entità coinvolte.
          </p>
        </div>

        <h2>Grado e ruolo</h2>
        <div class="box">
          <ul>
            <li><strong>Grado</strong> (<em>arity</em>): numero di entità partecipanti alla relazione.
              <ul>
                <li>Grado 2 → relazione binaria (es. <code>Studente–Corso</code>)</li>
                <li>Grado 3 → relazione ternaria (es. <code>Studente–Corso–Docente</code>)</li>
              </ul>
            </li>
            <li><strong>Ruolo</strong>: la funzione o prospettiva che un’entità assume nella relazione.
              <div class="note">Il ruolo distingue entità della stessa classe che partecipano con significati diversi.</div>
            </li>
          </ul>
        </div>

        <h2>Rappresentazione grafica</h2>
<div class="box">
  <p>
    Nel diagramma E-R, una relazione è rappresentata da un <strong>rombo</strong> collegato ai rettangoli delle entità partecipanti.
  </p>

  <svg width="600" height="200" viewBox="0 0 600 200">
    <!-- Entità STUDENTE -->
    <rect x="40" y="70" width="140" height="50" rx="8" ry="8"
          fill="#f0f9ff" stroke="#2563eb" stroke-width="2"/>
    <text x="110" y="100" font-size="15" text-anchor="middle" fill="#1e3a8a">STUDENTE</text>

    <!-- Relazione ISCRITTO -->
    <polygon points="270,80 320,50 370,80 320,110"
             fill="#fff7ed" stroke="#f59e0b" stroke-width="2"/>
    <text x="320" y="82" font-size="14" text-anchor="middle" fill="#78350f">ISCRITTO</text>

    <!-- Entità CORSO -->
    <rect x="440" y="70" width="140" height="50" rx="8" ry="8"
          fill="#f0f9ff" stroke="#2563eb" stroke-width="2"/>
    <text x="510" y="100" font-size="15" text-anchor="middle" fill="#1e3a8a">CORSO</text>

    <!-- Collegamenti -->
    <line x1="180" y1="95" x2="270" y2="85" stroke="#2563eb" stroke-width="2"/>
    <line x1="370" y1="85" x2="440" y2="95" stroke="#2563eb" stroke-width="2"/>
  </svg>

  <p class="ok">Esempio: la relazione <code>ISCRITTO</code> collega le entità <code>STUDENTE</code> e <code>CORSO</code>.</p>
</div>


        <h2>Cardinalità</h2>
        <div class="box">
          <p>
            Le <strong>cardinalità</strong> specificano quante istanze di un’entità possono partecipare a una o più
            istanze della relazione.  
            Sono espresse come coppie <code>(min, max)</code> su ciascun lato del collegamento.
          </p>

          <table>
            <thead><tr><th>Tipo</th><th>Forma</th><th>Significato</th></tr></thead>
            <tbody>
              <tr><td>1 : 1</td><td>Uno a uno</td><td>Ogni istanza di A è associata a una sola istanza di B e viceversa.</td></tr>
              <tr><td>1 : N</td><td>Uno a molti</td><td>Ogni istanza di A può essere associata a più istanze di B, ma ogni B a un solo A.</td></tr>
              <tr><td>N : M</td><td>Molti a molti</td><td>Le istanze di A e B possono essere associate in modo multiplo reciproco.</td></tr>
            </tbody>
          </table>

          <p class="note">La notazione di Chen non usa simboli (come “zampe di corvo”), ma esprime le cardinalità con etichette o valori.</p>

          <div style="margin-top:.6rem">
            <button id="btnCard" onclick="toggleBox('btnCard','ansCard')">Mostra formalizzazione ▼</button>
          </div>
          <div id="ansCard" style="display:none; margin-top:.5rem">
            <pre><code class="language-text">
Sia R ⊆ A × B una relazione binaria:
- Per ogni a ∈ A, esiste un sottoinsieme R(a) = { b ∈ B | (a,b) ∈ R }.
- Per ogni b ∈ B, esiste un sottoinsieme R⁻¹(b) = { a ∈ A | (a,b) ∈ R }.

Allora:
- R è 1:1 se |R(a)| ≤ 1 e |R⁻¹(b)| ≤ 1
- R è 1:N se |R(a)| ≥ 0, |R⁻¹(b)| ≤ 1
- R è N:M se entrambe le cardinalità possono superare 1
            </code></pre>
          </div>
        </div>

        <h2>Vincoli di partecipazione (obbligatorietà)</h2>
        <div class="box">
          <p>
            Ogni partecipazione di un’entità a una relazione può essere <strong>totale</strong> (obbligatoria) o
            <strong>parziale</strong> (facoltativa):
          </p>
          <ul>
            <li><strong>Totale</strong>: ogni istanza dell’entità partecipa almeno a una relazione (<code>min ≥ 1</code>).</li>
            <li><strong>Parziale</strong>: alcune istanze possono non partecipare (<code>min = 0</code>).</li>
          </ul>
          <p class="ok">Esempio: ogni iscrizione richiede uno studente (totale su Studente), ma non tutti gli studenti sono iscritti (parziale su Corso).</p>
        </div>

        <h2>Domanda-guida</h2>
        <div class="box">
          <p><strong>Perché nel modello E-R si preferisce rappresentare le relazioni come insiemi di tuple invece che come collegamenti diretti?</strong></p>
          <button id="btnDG23" onclick="toggleBox('btnDG23','ansDG23')">Mostra ▼</button>
          <div id="ansDG23" style="display:none; margin-top:.5rem">
            <ul>
              <li>Perché una relazione è un <strong>oggetto semantico autonomo</strong>, non solo un arco tra due entità.</li>
              <li>Consente di modellare <strong>attributi propri della relazione</strong> (es. DataIscrizione, Voto).</li>
              <li>Garantisce coerenza con il modello relazionale, dove le relazioni diventano tabelle di tuple.</li>
            </ul>
          </div>
        </div>

      </div>
    </div>

    <div class="nav-buttons" style="margin-top:10px">
      <button onclick="prevSlide()">&#8592; Indietro</button>
      <button onclick="nextSlide()">Avanti &#8594;</button>
    </div>
  </div>
</body>
</html>
